/*! For license information please see bundle.js.LICENSE.txt */
!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./src/index.js")}({"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js?!./src/assets/sass/main.scss":function(e,t,s){},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(e,t,s){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),d=[];function o(e){for(var t=-1,s=0;s<d.length;s++)if(d[s].identifier===e){t=s;break}return t}function a(e,t){for(var s={},i=[],n=0;n<e.length;n++){var r=e[n],a=t.base?r[0]+t.base:r[0],l=s[a]||0,c="".concat(a," ").concat(l);s[a]=l+1;var u=o(c),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(d[u].references++,d[u].updater(h)):d.push({identifier:c,updater:p(h,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=s.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var d=r(e.insert||"head");if(!d)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");d.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,s,i){var n=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var r=document.createTextNode(n),d=e.childNodes;d[t]&&e.removeChild(d[t]),d.length?e.insertBefore(r,d[t]):e.appendChild(r)}}function m(e,t,s){var i=s.css,n=s.media,r=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var g=null,f=0;function p(e,t){var s,i,n;if(t.singleton){var r=f++;s=g||(g=l(t)),i=h.bind(null,s,r,!1),n=h.bind(null,s,r,!0)}else s=l(t),i=m.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var n=o(s[i]);d[n].references--}for(var r=a(e,t),l=0;l<s.length;l++){var c=o(s[l]);0===d[c].references&&(d[c].updater(),d.splice(c,1))}s=r}}}},"./src/assets/sass/main.scss":function(e,t,s){var i=s("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=s("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js?!./src/assets/sass/main.scss");"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1},d=(i(n,r),n.locals?n.locals:{});e.exports=d},"./src/index.js":function(e,t,s){"use strict";s.r(t);s("./src/assets/sass/main.scss");var i=s("./src/modules/Board.js"),n=s("./src/modules/algorithms/dijkstra.js"),r=s("./src/modules/algorithms/breadthFirst.js");const d={dijkstra:{name:"Dijkstra",func:n.dijkstra},bfs:{name:"Breadth-First Search",func:r.breadthFirst}};new i.default("board",25,d).initialize()},"./src/modules/Board.js":function(e,t,s){"use strict";s.r(t);var i=s("./src/modules/helpers/block.js"),n=s("./src/modules/helpers/getRandomNum.js"),r=(s("./src/modules/algorithms/dijkstra.js"),s("./src/modules/algorithms/breadthFirst.js"),s("./src/modules/helpers/getDifferentRandomNum.js")),d=s("./src/modules/Node.js"),o=s("./src/modules/algorithms/helpers/weighted.js");t.default=class{constructor(e,t,s){this.boardId=e,this.blockSize=t,this.width=null,this.height=null,this.nodes={},this.startNode=null,this.endNode=null,this.isMakingWalls=!1,this.isNodeDragged=!1,this.draggedNodeClassList=null,this.algorithms=s,this.currentAlgorithm=null,this.speed=40,this.isSearching=!1,this.isPrepared=!1}initialize(){this.createNav(),this.calculateBoardSize(),this.createBoard(),this.setStartNode(),this.setEndNode(),this.setCurrentAlgorithm("dijkstra"),this.addNavAlgoElemsEventListeners(),this.addBlocksEventListeners(),this.addBtnsEventListeners(),console.log(this),this.isPrepared=!0}calculateBoardSize(){const e=document.getElementById(this.boardId),t=e.clientWidth,s=e.clientHeight;this.width=Math.floor(t/this.blockSize),this.height=Math.floor(s/this.blockSize)}createBoard(){const e=document.getElementById(this.boardId),t=document.createElement("tbody");for(let e=this.height-1;e>=0;e--){const s=document.createElement("tr");for(let t=0;t<this.width;t++){Object(i.createBlock)(s,this.blockSize,t,e);const n=new d.default("block",t,e,1/0,null,null);this.nodes[n.id]=n}t.appendChild(s)}e.appendChild(t)}createNav(){const e=document.getElementById("nav");for(let[t,s]of Object.entries(this.algorithms)){const i=document.createElement("div");i.classList.add("nav-algorithm-js"),i.innerText=s.name,i.dataset.algorithmKey=t,e.appendChild(i)}}setCurrentAlgorithm(e){this.currentAlgorithm=this.algorithms[e].func,document.querySelectorAll(".nav-algorithm-js")[0].classList.add("active")}setStartNode(){const e=Object(n.getRandomNum)(0,this.width-1),t=Object(n.getRandomNum)(0,this.height-1);this.nodes[`${e}-${t}`].update({status:"start",dist:0,direction:o.directions.east}),this.startNode=this.nodes[`${e}-${t}`],document.getElementById(this.startNode.id).classList.add("start","east")}setEndNode(){const e=Object(r.getDifferentRandomNum)(0,this.width-1,this.startNode.x),t=Object(r.getDifferentRandomNum)(0,this.height-1,this.startNode.y);this.nodes[`${e}-${t}`].status="end",this.nodes[`${e}-${t}`].update({status:"end"}),this.endNode=this.nodes[`${e}-${t}`],document.getElementById(this.endNode.id).classList.add("end")}addNavAlgoElemsEventListeners(){const e=document.querySelectorAll(".nav-algorithm-js");e.forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("blocked")||(e.forEach(e=>e.classList.remove("active")),t.target.classList.add("active"),this.currentAlgorithm=this.algorithms[t.target.dataset.algorithmKey].func)})})}addBtnsEventListeners(){const e=document.getElementById("startBtn"),t=document.getElementById("clearBtn");e.addEventListener("click",async e=>{this.isPrepared&&(this.handleIsSearchingState(!0),this.handleIsPreparedState(!1),await this.currentAlgorithm(this.nodes,this.startNode,this.endNode,this.speed),this.handleIsSearchingState(!1))}),t.addEventListener("click",e=>{this.isSearching||(this.clearBoard(),this.handleIsPreparedState(!0))})}addBlocksEventListeners(){document.querySelectorAll(".unvisited").forEach(e=>{e.addEventListener("mousedown",t=>{t.preventDefault(),this.handleMouseDown(e)}),e.addEventListener("mouseenter",t=>{t.preventDefault(),this.handleMouseEnter(e)}),e.addEventListener("mouseup",t=>{t.preventDefault(),this.handleMouseUp(e)}),e.addEventListener("mouseleave",t=>{t.preventDefault(),this.handleMouseLeave(e)})})}handleMouseDown(e){const t=e.id;"start"===this.nodes[t].status||"end"===this.nodes[t].status?(this.draggedNodeId=t,this.isNodeDragged=!0):this.isNodeDragged||(this.createWall(e),this.setMakingWallsState(!0))}handleMouseEnter(e){if(this.isNodeDragged){const t=this.nodes[this.draggedNodeId];if("start"!==t.status||e.classList.contains("end"))"end"!==t.status||e.classList.contains("start")||e.classList.add("end");else{const s=Object(o.getDirectionName)(t.direction);e.classList.add("start",s)}}else this.isMakingWalls&&this.createWall(e)}handleMouseUp(e){const t=e.id;this.isNodeDragged&&t!==this.draggedNodeId?("start"===this.nodes[this.draggedNodeId].status?(this.nodes[t].update({status:"start",dist:0,direction:o.directions.east}),this.startNode=this.nodes[t]):"end"===this.nodes[this.draggedNodeId].status&&(this.nodes[t].update({status:"end",dist:1/0,direction:null}),this.endNode=this.nodes[t]),this.nodes[this.draggedNodeId].update({status:"block",dist:1/0,direction:null}),this.isNodeDragged=!1,this.draggedNodeId=null):this.setMakingWallsState(!1)}handleMouseLeave(e){if(this.isNodeDragged){const t=this.nodes[this.draggedNodeId];if("start"===t.status){const s=Object(o.getDirectionName)(t.direction);e.classList.remove("start",s)}else"end"===t.status&&e.classList.remove("end")}}createWall(e){window.requestAnimationFrame(()=>e.classList.add("wall"))}blockHasWall(e){return e.classList.contains("wall")}setMakingWallsState(e){this.isMakingWalls=e}handleIsSearchingState(e){this.isSearching=e,document.getElementById("clearBtn").disabled=e}handleIsPreparedState(e){this.isPrepared=e,document.getElementById("startBtn").disabled=!e}clearBoard(){for(let e=this.height-1;e>=0;e--)for(let t=0;t<this.width;t++)this.nodes[`${t}-${e}`].update({status:"block",dist:1/0,prevId:null,direction:null}),document.getElementById(`${t}-${e}`).classList=[],document.getElementById(`${t}-${e}`).classList.add("unvisited");this.setStartNode(),this.setEndNode()}}},"./src/modules/Node.js":function(e,t,s){"use strict";s.r(t);t.default=class{constructor(e,t,s,i,n,r){this.status=e,this.id=`${t}-${s}`,this.x=t,this.y=s,this.dist=i,this.prevId=n,this.direction=r,this.update=this.update.bind(this)}update(e){for(let t of Object.keys(this))for(let s of Object.keys(e))t===s&&(this[t]=e[s])}}},"./src/modules/algorithms/breadthFirst.js":function(e,t,s){"use strict";s.r(t),s.d(t,"breadthFirst",(function(){return o}));var i=s("./src/modules/helpers/asyncDelay.js"),n=s("./src/modules/algorithms/helpers/neighbors.js"),r=s("./src/modules/helpers/visualizePath.js"),d=s("./src/modules/algorithms/helpers/nodes.js");const o=async(e,t,s,o)=>{let a=Object.keys(e),l={},c=!1;for(;a.length;){const t=Object(d.getClosestNode)(a,e);if(document.getElementById(t.id).classList.add("visited"),await Object(i.default)(o),!t)break;if(l[t.id]=t,h=s,(u=t).x===h.x&&u.y===h.y){c=!0;break}Object(n.getNeighborsIds)(e,t.x,t.y).forEach(s=>{t.dist<e[s].dist&&(e[s].dist=t.dist+1,e[s].prevId=t.id),document.getElementById(e[s].id).classList.replace("unvisited","neighbor")})}var u,h;c&&Object(r.visualizePath)(l,t,s,o)}},"./src/modules/algorithms/dijkstra.js":function(e,t,s){"use strict";s.r(t),s.d(t,"dijkstra",(function(){return a}));var i=s("./src/modules/helpers/asyncDelay.js"),n=s("./src/modules/algorithms/helpers/weighted.js"),r=s("./src/modules/algorithms/helpers/neighbors.js"),d=s("./src/modules/helpers/visualizePath.js"),o=s("./src/modules/algorithms/helpers/nodes.js");const a=async(e,t,s,a)=>{let l=Object.keys(e),c={},u=!1;for(;l.length;){const t=Object(o.getClosestNode)(l,e);if(document.getElementById(t.id).classList.add("visited"),await Object(i.default)(a),!t)break;if(c[t.id]=t,m=s,(h=t).x===m.x&&h.y===m.y){u=!0;break}Object(r.getNeighborsIds)(e,t.x,t.y).forEach(s=>{const i=Object(n.getDistanceBetweenNodes)(t,e[s]);document.getElementById(e[s].id).classList.replace("unvisited","neighbor"),t.dist+i<e[s].dist&&(e[s].dist=t.dist+i,e[s].prevId=t.id,e[s].direction=Object(n.getNodeDirection)(t,e[s]))})}var h,m;u&&Object(d.visualizePath)(c,t,s,a)}},"./src/modules/algorithms/helpers/neighbors.js":function(e,t,s){"use strict";s.r(t),s.d(t,"getNeighborsIds",(function(){return i}));const i=(e,t,s)=>{let i=[];return e[`${t}-${s+1}`]&&!document.getElementById(`${t}-${s+1}`).classList.contains("wall")&&i.push(`${t}-${s+1}`),e[`${t+1}-${s}`]&&!document.getElementById(`${t+1}-${s}`).classList.contains("wall")&&i.push(`${t+1}-${s}`),e[`${t}-${s-1}`]&&!document.getElementById(`${t}-${s-1}`).classList.contains("wall")&&i.push(`${t}-${s-1}`),e[`${t-1}-${s}`]&&!document.getElementById(`${t-1}-${s}`).classList.contains("wall")&&i.push(`${t-1}-${s}`),i}},"./src/modules/algorithms/helpers/nodes.js":function(e,t,s){"use strict";s.r(t),s.d(t,"getClosestNode",(function(){return i}));const i=(e,t)=>{let s=1/0,i=0,n=0;return e.forEach((e,r)=>{t[e]&&t[e].dist<s&&(s=t[e].dist,i=e,n=r)}),e.splice(n,1),t[i]}},"./src/modules/algorithms/helpers/weighted.js":function(e,t,s){"use strict";s.r(t),s.d(t,"directions",(function(){return i})),s.d(t,"getDirectionName",(function(){return r})),s.d(t,"northDirectionWeights",(function(){return d})),s.d(t,"eastDirectionWeights",(function(){return o})),s.d(t,"southDirectionWeights",(function(){return a})),s.d(t,"westDirectionWeights",(function(){return l})),s.d(t,"moveWeight",(function(){return c})),s.d(t,"getDistanceBetweenNodes",(function(){return u})),s.d(t,"getNodeDirection",(function(){return h}));const i={north:0,east:1,south:2,west:3},n=["north","east","south","west"],r=e=>n[e],d=[0,1,2,1],o=[1,0,1,2],a=[2,1,0,1],l=[1,2,1,0],c=1,u=(e,t)=>{if(e.y<t.y&&e.x===t.x)return d[e.direction]+c;if(e.x<t.x&&e.y===t.y)return o[e.direction]+c;if(e.y>t.y&&e.x===t.x)return a[e.direction]+c;if(e.x>t.x&&e.y===t.y)return l[e.direction]+c;throw new Error("Something went wrong when setting the distance between nodes.")},h=(e,t)=>{if(e.y<t.y&&e.x===t.x)return i.north;if(e.x<t.x&&e.y===t.y)return i.east;if(e.y>t.y&&e.x===t.x)return i.south;if(e.x>t.x&&e.y===t.y)return i.west;throw new Error("Something went wrong when setting the direction of node.")}},"./src/modules/helpers/asyncDelay.js":function(e,t,s){"use strict";s.r(t),t.default=e=>new Promise(t=>setTimeout(t,e))},"./src/modules/helpers/block.js":function(e,t,s){"use strict";s.r(t),s.d(t,"createBlock",(function(){return i}));const i=(e,t,s,i)=>{const n=document.createElement("td");n.id=`${s}-${i}`,n.classList.add("unvisited"),n.style.width=t+"px",n.style.height=t+"px",n.dataset.x=s,n.dataset.y=i,e.appendChild(n)}},"./src/modules/helpers/getDifferentRandomNum.js":function(e,t,s){"use strict";s.r(t),s.d(t,"getDifferentRandomNum",(function(){return n}));var i=s("./src/modules/helpers/getRandomNum.js");const n=(e,t,s)=>{let n;do{n=Object(i.getRandomNum)(e,t)}while(n===s);return n}},"./src/modules/helpers/getRandomNum.js":function(e,t,s){"use strict";s.r(t),s.d(t,"getRandomNum",(function(){return i}));const i=(e,t)=>Math.floor(Math.random()*t)+e},"./src/modules/helpers/visualizePath.js":function(e,t,s){"use strict";s.r(t),s.d(t,"visualizePath",(function(){return n}));var i=s("./src/modules/helpers/asyncDelay.js");const n=async(e,t,s,n)=>{let r=[],d=!1,o=e[`${s.x}-${s.y}`];for(r.push(o.id);!d;){if(o.x===t.x&&o.y===t.y){d=!0;break}r.push(o.prevId),o=e[o.prevId]}for(let e=r.length-1;e>=0;e--)document.getElementById(r[e]).classList.add("path"),await Object(i.default)(n+100)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvc2Fzcy9tYWluLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL0JvYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL05vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvYWxnb3JpdGhtcy9icmVhZHRoRmlyc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvYWxnb3JpdGhtcy9kaWprc3RyYS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9hbGdvcml0aG1zL2hlbHBlcnMvbmVpZ2hib3JzLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2FsZ29yaXRobXMvaGVscGVycy9ub2Rlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9hbGdvcml0aG1zL2hlbHBlcnMvd2VpZ2h0ZWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvaGVscGVycy9hc3luY0RlbGF5LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2hlbHBlcnMvYmxvY2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvaGVscGVycy9nZXREaWZmZXJlbnRSYW5kb21OdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvaGVscGVycy9nZXRSYW5kb21OdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvaGVscGVycy92aXN1YWxpemVQYXRoLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsIm9wdGlvbnMiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiaWQiLCJiYXNlIiwiY291bnQiLCJjb25jYXQiLCJpbmRleCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJwdXNoIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsImxhc3RJZGVudGlmaWVycyIsIm5ld0xpc3QiLCJ0b1N0cmluZyIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwiYXBpIiwiY29udGVudCIsImRlZmF1bHQiLCJleHBvcnRlZCIsImxvY2FscyIsInBhdGhmaW5kaW5nQWxnb3JpdGhtcyIsImRpamtzdHJhIiwiZnVuYyIsImJmcyIsImluaXRpYWxpemUiLCJib2FyZElkIiwiYmxvY2tTaXplIiwiYWxnb3JpdGhtcyIsInRoaXMiLCJ3aWR0aCIsImhlaWdodCIsIm5vZGVzIiwic3RhcnROb2RlIiwiZW5kTm9kZSIsImlzTWFraW5nV2FsbHMiLCJpc05vZGVEcmFnZ2VkIiwiZHJhZ2dlZE5vZGVDbGFzc0xpc3QiLCJjdXJyZW50QWxnb3JpdGhtIiwic3BlZWQiLCJpc1NlYXJjaGluZyIsImlzUHJlcGFyZWQiLCJjcmVhdGVOYXYiLCJjYWxjdWxhdGVCb2FyZFNpemUiLCJjcmVhdGVCb2FyZCIsInNldFN0YXJ0Tm9kZSIsInNldEVuZE5vZGUiLCJzZXRDdXJyZW50QWxnb3JpdGhtIiwiYWRkTmF2QWxnb0VsZW1zRXZlbnRMaXN0ZW5lcnMiLCJhZGRCbG9ja3NFdmVudExpc3RlbmVycyIsImFkZEJ0bnNFdmVudExpc3RlbmVycyIsImNvbnNvbGUiLCJsb2ciLCJib2FyZCIsImdldEVsZW1lbnRCeUlkIiwicHhXaWR0aCIsImNsaWVudFdpZHRoIiwicHhIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJNYXRoIiwiZmxvb3IiLCJ0Ym9keSIsInkiLCJyb3ciLCJ4IiwibmV3Tm9kZSIsIkluZmluaXR5IiwibmF2IiwiYWxnbyIsImVudHJpZXMiLCJlbGVtIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJUZXh0IiwiZGF0YXNldCIsImFsZ29yaXRobUtleSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyYW5kWCIsInJhbmRZIiwic3RhdHVzIiwiZGlzdCIsImRpcmVjdGlvbiIsImVsZW1zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwic3RhcnRCdG4iLCJjbGVhckJ0biIsImFzeW5jIiwiaGFuZGxlSXNTZWFyY2hpbmdTdGF0ZSIsImhhbmRsZUlzUHJlcGFyZWRTdGF0ZSIsImNsZWFyQm9hcmQiLCJibG9jayIsInByZXZlbnREZWZhdWx0IiwiaGFuZGxlTW91c2VEb3duIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZU1vdXNlVXAiLCJoYW5kbGVNb3VzZUxlYXZlIiwiZHJhZ2dlZE5vZGVJZCIsImNyZWF0ZVdhbGwiLCJzZXRNYWtpbmdXYWxsc1N0YXRlIiwiZHJhZ2dlZE5vZGUiLCJkaXJlY3Rpb25OYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYm9vbCIsImRpc2FibGVkIiwicHJldklkIiwidmFsdWVzIiwiZmllbGRLZXkiLCJ2YWxLZXkiLCJicmVhZHRoRmlyc3QiLCJzdGFydCIsImVuZCIsInVudmlzaXRlZE5vZGVzSWRzIiwidmlzaXRlZE5vZGVzIiwiZm91bmRFbmQiLCJjdXJyTm9kZSIsIm4yIiwibjEiLCJuZWlnaGJvcklkIiwicmVwbGFjZSIsImRpc3RhbmNlQmV0d2Vlbk5vZGVzIiwiZ2V0TmVpZ2hib3JzSWRzIiwiYXJyIiwiZ2V0Q2xvc2VzdE5vZGUiLCJ1bnZpc2l0ZWRJZHMiLCJtaW4iLCJtaW5EaXN0Tm9kZUlkIiwiZGlyZWN0aW9ucyIsIm5vcnRoIiwiZWFzdCIsInNvdXRoIiwid2VzdCIsImRpcmVjdGlvbnNOYW1lIiwiZ2V0RGlyZWN0aW9uTmFtZSIsIm5vcnRoRGlyZWN0aW9uV2VpZ2h0cyIsImVhc3REaXJlY3Rpb25XZWlnaHRzIiwic291dGhEaXJlY3Rpb25XZWlnaHRzIiwid2VzdERpcmVjdGlvbldlaWdodHMiLCJtb3ZlV2VpZ2h0IiwiZ2V0RGlzdGFuY2VCZXR3ZWVuTm9kZXMiLCJub2RlXzEiLCJub2RlXzIiLCJnZXROb2RlRGlyZWN0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibXMiLCJjcmVhdGVCbG9jayIsInBhcmVudCIsImdldERpZmZlcmVudFJhbmRvbU51bSIsIm1heCIsImRpZmZlcmVudEZyb20iLCJyYW5kIiwiZ2V0UmFuZG9tTnVtIiwicmFuZG9tIiwidmlzdWFsaXplUGF0aCIsInBhdGhJZHMiLCJmb3VuZFN0YXJ0Il0sIm1hcHBpbmdzIjoiO2FBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIs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MUMsRUFBU25ELElBQU04QyxFQUFNOUMsR0FBS21ELEVBQVNyRCxJQUFNZ0QsRUFBTWhELEVBQUcsQ0FDcEQrRixHQUFhLEVBQ2IsTUFFRkQsRUFBUTdMLEtBQUtvSixFQUFTVixRQUN0QlUsRUFBV0YsRUFBYUUsRUFBU1YsUUFHbkMsSUFBSyxJQUFJL00sRUFBSWtRLEVBQVEvTSxPQUFTLEVBQUduRCxHQUFLLEVBQUdBLElBQ3ZDb0MsU0FBU3dILGVBQWVzRyxFQUFRbFEsSUFBSTZLLFVBQVVDLElBQUksY0FDNUMsa0JBQVdqQyxFQUFRIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL2luZGV4LmpzXCIpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Jlc29sdmUtdXJsLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tNC00IS4vbWFpbi5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVkOyIsImltcG9ydCBcIi4vYXNzZXRzL3Nhc3MvbWFpbi5zY3NzXCI7XG5pbXBvcnQgQm9hcmQgZnJvbSBcIi4vbW9kdWxlcy9Cb2FyZFwiO1xuaW1wb3J0IHsgZGlqa3N0cmEgfSBmcm9tIFwiLi9tb2R1bGVzL2FsZ29yaXRobXMvZGlqa3N0cmFcIjtcbmltcG9ydCB7IGJyZWFkdGhGaXJzdCB9IGZyb20gXCIuL21vZHVsZXMvYWxnb3JpdGhtcy9icmVhZHRoRmlyc3RcIjtcblxuY29uc3QgcGF0aGZpbmRpbmdBbGdvcml0aG1zID0ge1xuICBkaWprc3RyYToge1xuICAgIG5hbWU6IFwiRGlqa3N0cmFcIixcbiAgICBmdW5jOiBkaWprc3RyYSxcbiAgfSxcbiAgYmZzOiB7XG4gICAgbmFtZTogXCJCcmVhZHRoLUZpcnN0IFNlYXJjaFwiLFxuICAgIGZ1bmM6IGJyZWFkdGhGaXJzdCxcbiAgfSxcbn07XG5cbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKFwiYm9hcmRcIiwgMjUsIHBhdGhmaW5kaW5nQWxnb3JpdGhtcyk7XG5ib2FyZC5pbml0aWFsaXplKCk7XG4iLCJpbXBvcnQgeyBjcmVhdGVCbG9jayB9IGZyb20gXCIuL2hlbHBlcnMvYmxvY2tcIjtcbmltcG9ydCB7IGdldFJhbmRvbU51bSB9IGZyb20gXCIuL2hlbHBlcnMvZ2V0UmFuZG9tTnVtXCI7XG5pbXBvcnQgeyBkaWprc3RyYSB9IGZyb20gXCIuL2FsZ29yaXRobXMvZGlqa3N0cmFcIjtcbmltcG9ydCB7IGJyZWFkdGhGaXJzdCB9IGZyb20gXCIuL2FsZ29yaXRobXMvYnJlYWR0aEZpcnN0XCI7XG5pbXBvcnQgeyBnZXREaWZmZXJlbnRSYW5kb21OdW0gfSBmcm9tIFwiLi9oZWxwZXJzL2dldERpZmZlcmVudFJhbmRvbU51bVwiO1xuaW1wb3J0IE5vZGUgZnJvbSBcIi4vTm9kZVwiO1xuaW1wb3J0IHsgZGlyZWN0aW9ucywgZ2V0RGlyZWN0aW9uTmFtZSB9IGZyb20gXCIuL2FsZ29yaXRobXMvaGVscGVycy93ZWlnaHRlZFwiO1xuXG5jbGFzcyBCb2FyZCB7XG4gIGNvbnN0cnVjdG9yKGJvYXJkSWQsIGJsb2NrU2l6ZSwgYWxnb3JpdGhtcykge1xuICAgIHRoaXMuYm9hcmRJZCA9IGJvYXJkSWQ7XG4gICAgdGhpcy5ibG9ja1NpemUgPSBibG9ja1NpemU7XG4gICAgdGhpcy53aWR0aCA9IG51bGw7XG4gICAgdGhpcy5oZWlnaHQgPSBudWxsO1xuICAgIHRoaXMubm9kZXMgPSB7fTtcbiAgICB0aGlzLnN0YXJ0Tm9kZSA9IG51bGw7XG4gICAgdGhpcy5lbmROb2RlID0gbnVsbDtcbiAgICB0aGlzLmlzTWFraW5nV2FsbHMgPSBmYWxzZTtcbiAgICB0aGlzLmlzTm9kZURyYWdnZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRyYWdnZWROb2RlQ2xhc3NMaXN0ID0gbnVsbDtcbiAgICB0aGlzLmFsZ29yaXRobXMgPSBhbGdvcml0aG1zO1xuICAgIHRoaXMuY3VycmVudEFsZ29yaXRobSA9IG51bGw7XG4gICAgdGhpcy5zcGVlZCA9IDQwO1xuICAgIHRoaXMuaXNTZWFyY2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzUHJlcGFyZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5jcmVhdGVOYXYoKTtcbiAgICB0aGlzLmNhbGN1bGF0ZUJvYXJkU2l6ZSgpO1xuICAgIHRoaXMuY3JlYXRlQm9hcmQoKTtcbiAgICB0aGlzLnNldFN0YXJ0Tm9kZSgpO1xuICAgIHRoaXMuc2V0RW5kTm9kZSgpO1xuXG4gICAgdGhpcy5zZXRDdXJyZW50QWxnb3JpdGhtKFwiZGlqa3N0cmFcIik7XG5cbiAgICB0aGlzLmFkZE5hdkFsZ29FbGVtc0V2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5hZGRCbG9ja3NFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuYWRkQnRuc0V2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICB0aGlzLmlzUHJlcGFyZWQgPSB0cnVlO1xuICB9XG5cbiAgY2FsY3VsYXRlQm9hcmRTaXplKCkge1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5ib2FyZElkKTtcbiAgICBjb25zdCBweFdpZHRoID0gYm9hcmQuY2xpZW50V2lkdGg7XG4gICAgY29uc3QgcHhIZWlnaHQgPSBib2FyZC5jbGllbnRIZWlnaHQ7XG5cbiAgICB0aGlzLndpZHRoID0gTWF0aC5mbG9vcihweFdpZHRoIC8gdGhpcy5ibG9ja1NpemUpO1xuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihweEhlaWdodCAvIHRoaXMuYmxvY2tTaXplKTtcbiAgfVxuXG4gIGNyZWF0ZUJvYXJkKCkge1xuICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5ib2FyZElkKTtcbiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKTtcblxuICAgIGZvciAobGV0IHkgPSB0aGlzLmhlaWdodCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xuICAgICAgICBjcmVhdGVCbG9jayhyb3csIHRoaXMuYmxvY2tTaXplLCB4LCB5KTtcblxuICAgICAgICBjb25zdCBuZXdOb2RlID0gbmV3IE5vZGUoXCJibG9ja1wiLCB4LCB5LCBJbmZpbml0eSwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHRoaXMubm9kZXNbbmV3Tm9kZS5pZF0gPSBuZXdOb2RlO1xuICAgICAgfVxuICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTtcbiAgICB9XG5cbiAgICBib2FyZC5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gIH1cblxuICBjcmVhdGVOYXYoKSB7XG4gICAgY29uc3QgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXZcIik7XG4gICAgZm9yIChsZXQgW2tleSwgYWxnb10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hbGdvcml0aG1zKSkge1xuICAgICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJuYXYtYWxnb3JpdGhtLWpzXCIpO1xuICAgICAgZWxlbS5pbm5lclRleHQgPSBhbGdvLm5hbWU7XG4gICAgICBlbGVtLmRhdGFzZXQuYWxnb3JpdGhtS2V5ID0ga2V5O1xuICAgICAgbmF2LmFwcGVuZENoaWxkKGVsZW0pO1xuICAgIH1cbiAgfVxuXG4gIHNldEN1cnJlbnRBbGdvcml0aG0oYWxnbykge1xuICAgIHRoaXMuY3VycmVudEFsZ29yaXRobSA9IHRoaXMuYWxnb3JpdGhtc1thbGdvXS5mdW5jO1xuICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtYWxnb3JpdGhtLWpzXCIpO1xuICAgIGVsZW1zWzBdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH1cblxuICBzZXRTdGFydE5vZGUoKSB7XG4gICAgY29uc3QgcmFuZFggPSBnZXRSYW5kb21OdW0oMCwgdGhpcy53aWR0aCAtIDEpO1xuICAgIGNvbnN0IHJhbmRZID0gZ2V0UmFuZG9tTnVtKDAsIHRoaXMuaGVpZ2h0IC0gMSk7XG5cbiAgICB0aGlzLm5vZGVzW2Ake3JhbmRYfS0ke3JhbmRZfWBdLnVwZGF0ZSh7XG4gICAgICBzdGF0dXM6IFwic3RhcnRcIixcbiAgICAgIGRpc3Q6IDAsXG4gICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbnNbXCJlYXN0XCJdLFxuICAgIH0pO1xuICAgIHRoaXMuc3RhcnROb2RlID0gdGhpcy5ub2Rlc1tgJHtyYW5kWH0tJHtyYW5kWX1gXTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0YXJ0Tm9kZS5pZCkuY2xhc3NMaXN0LmFkZChcInN0YXJ0XCIsIFwiZWFzdFwiKTtcbiAgfVxuXG4gIHNldEVuZE5vZGUoKSB7XG4gICAgY29uc3QgcmFuZFggPSBnZXREaWZmZXJlbnRSYW5kb21OdW0oMCwgdGhpcy53aWR0aCAtIDEsIHRoaXMuc3RhcnROb2RlLngpO1xuICAgIGNvbnN0IHJhbmRZID0gZ2V0RGlmZmVyZW50UmFuZG9tTnVtKDAsIHRoaXMuaGVpZ2h0IC0gMSwgdGhpcy5zdGFydE5vZGUueSk7XG5cbiAgICB0aGlzLm5vZGVzW2Ake3JhbmRYfS0ke3JhbmRZfWBdLnN0YXR1cyA9IFwiZW5kXCI7XG4gICAgdGhpcy5ub2Rlc1tgJHtyYW5kWH0tJHtyYW5kWX1gXS51cGRhdGUoe1xuICAgICAgc3RhdHVzOiBcImVuZFwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5lbmROb2RlID0gdGhpcy5ub2Rlc1tgJHtyYW5kWH0tJHtyYW5kWX1gXTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZE5vZGUuaWQpLmNsYXNzTGlzdC5hZGQoXCJlbmRcIik7XG4gIH1cblxuICBhZGROYXZBbGdvRWxlbXNFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2LWFsZ29yaXRobS1qc1wiKTtcblxuICAgIGVsZW1zLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzQmxvY2tlZCA9IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJsb2NrZWRcIik7XG4gICAgICAgIGlmIChpc0Jsb2NrZWQpIHJldHVybjtcblxuICAgICAgICBlbGVtcy5mb3JFYWNoKChlbGVtKSA9PiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICB0aGlzLmN1cnJlbnRBbGdvcml0aG0gPSB0aGlzLmFsZ29yaXRobXNbXG4gICAgICAgICAgZS50YXJnZXQuZGF0YXNldC5hbGdvcml0aG1LZXlcbiAgICAgICAgXS5mdW5jO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRCdG5zRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0QnRuXCIpO1xuICAgIGNvbnN0IGNsZWFyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGVhckJ0blwiKTtcblxuICAgIHN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNQcmVwYXJlZCkge1xuICAgICAgICB0aGlzLmhhbmRsZUlzU2VhcmNoaW5nU3RhdGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlSXNQcmVwYXJlZFN0YXRlKGZhbHNlKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRBbGdvcml0aG0oXG4gICAgICAgICAgdGhpcy5ub2RlcyxcbiAgICAgICAgICB0aGlzLnN0YXJ0Tm9kZSxcbiAgICAgICAgICB0aGlzLmVuZE5vZGUsXG4gICAgICAgICAgdGhpcy5zcGVlZFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmhhbmRsZUlzU2VhcmNoaW5nU3RhdGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuaXNTZWFyY2hpbmcpIHtcbiAgICAgICAgdGhpcy5jbGVhckJvYXJkKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlSXNQcmVwYXJlZFN0YXRlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYWRkQmxvY2tzRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgYmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi51bnZpc2l0ZWRcIik7XG5cbiAgICBibG9ja3MuZm9yRWFjaCgoYmxvY2spID0+IHtcbiAgICAgIGJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlRG93bihibG9jayk7XG4gICAgICB9KTtcblxuICAgICAgYmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlRW50ZXIoYmxvY2spO1xuICAgICAgfSk7XG5cbiAgICAgIGJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZVVwKGJsb2NrKTtcbiAgICAgIH0pO1xuXG4gICAgICBibG9jay5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VMZWF2ZShibG9jayk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlRG93bihibG9jaykge1xuICAgIGNvbnN0IGlkID0gYmxvY2suaWQ7XG4gICAgaWYgKHRoaXMubm9kZXNbaWRdLnN0YXR1cyA9PT0gXCJzdGFydFwiIHx8IHRoaXMubm9kZXNbaWRdLnN0YXR1cyA9PT0gXCJlbmRcIikge1xuICAgICAgdGhpcy5kcmFnZ2VkTm9kZUlkID0gaWQ7XG4gICAgICB0aGlzLmlzTm9kZURyYWdnZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNOb2RlRHJhZ2dlZCkge1xuICAgICAgdGhpcy5jcmVhdGVXYWxsKGJsb2NrKTtcbiAgICAgIHRoaXMuc2V0TWFraW5nV2FsbHNTdGF0ZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb3VzZUVudGVyKGJsb2NrKSB7XG4gICAgaWYgKHRoaXMuaXNOb2RlRHJhZ2dlZCkge1xuICAgICAgY29uc3QgZHJhZ2dlZE5vZGUgPSB0aGlzLm5vZGVzW3RoaXMuZHJhZ2dlZE5vZGVJZF07XG4gICAgICBpZiAoZHJhZ2dlZE5vZGUuc3RhdHVzID09PSBcInN0YXJ0XCIgJiYgIWJsb2NrLmNsYXNzTGlzdC5jb250YWlucyhcImVuZFwiKSkge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25OYW1lID0gZ2V0RGlyZWN0aW9uTmFtZShkcmFnZ2VkTm9kZS5kaXJlY3Rpb24pO1xuICAgICAgICBibG9jay5jbGFzc0xpc3QuYWRkKFwic3RhcnRcIiwgZGlyZWN0aW9uTmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBkcmFnZ2VkTm9kZS5zdGF0dXMgPT09IFwiZW5kXCIgJiZcbiAgICAgICAgIWJsb2NrLmNsYXNzTGlzdC5jb250YWlucyhcInN0YXJ0XCIpXG4gICAgICApIHtcbiAgICAgICAgYmxvY2suY2xhc3NMaXN0LmFkZChcImVuZFwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNNYWtpbmdXYWxscykge1xuICAgICAgdGhpcy5jcmVhdGVXYWxsKGJsb2NrKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb3VzZVVwKGJsb2NrKSB7XG4gICAgY29uc3QgaWQgPSBibG9jay5pZDtcbiAgICBpZiAodGhpcy5pc05vZGVEcmFnZ2VkICYmIGlkICE9PSB0aGlzLmRyYWdnZWROb2RlSWQpIHtcbiAgICAgIGlmICh0aGlzLm5vZGVzW3RoaXMuZHJhZ2dlZE5vZGVJZF0uc3RhdHVzID09PSBcInN0YXJ0XCIpIHtcbiAgICAgICAgdGhpcy5ub2Rlc1tpZF0udXBkYXRlKHtcbiAgICAgICAgICBzdGF0dXM6IFwic3RhcnRcIixcbiAgICAgICAgICBkaXN0OiAwLFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uc1tcImVhc3RcIl0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXJ0Tm9kZSA9IHRoaXMubm9kZXNbaWRdO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm5vZGVzW3RoaXMuZHJhZ2dlZE5vZGVJZF0uc3RhdHVzID09PSBcImVuZFwiKSB7XG4gICAgICAgIHRoaXMubm9kZXNbaWRdLnVwZGF0ZSh7XG4gICAgICAgICAgc3RhdHVzOiBcImVuZFwiLFxuICAgICAgICAgIGRpc3Q6IEluZmluaXR5LFxuICAgICAgICAgIGRpcmVjdGlvbjogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5kTm9kZSA9IHRoaXMubm9kZXNbaWRdO1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgdGhlIGluaXRpYWxseSBkcmFnZ2VkIG5vZGVcbiAgICAgIHRoaXMubm9kZXNbdGhpcy5kcmFnZ2VkTm9kZUlkXS51cGRhdGUoe1xuICAgICAgICBzdGF0dXM6IFwiYmxvY2tcIixcbiAgICAgICAgZGlzdDogSW5maW5pdHksXG4gICAgICAgIGRpcmVjdGlvbjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmlzTm9kZURyYWdnZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZHJhZ2dlZE5vZGVJZCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0TWFraW5nV2FsbHNTdGF0ZShmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW91c2VMZWF2ZShibG9jaykge1xuICAgIGlmICh0aGlzLmlzTm9kZURyYWdnZWQpIHtcbiAgICAgIGNvbnN0IGRyYWdnZWROb2RlID0gdGhpcy5ub2Rlc1t0aGlzLmRyYWdnZWROb2RlSWRdO1xuICAgICAgaWYgKGRyYWdnZWROb2RlLnN0YXR1cyA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbk5hbWUgPSBnZXREaXJlY3Rpb25OYW1lKGRyYWdnZWROb2RlLmRpcmVjdGlvbik7XG4gICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoXCJzdGFydFwiLCBkaXJlY3Rpb25OYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAoZHJhZ2dlZE5vZGUuc3RhdHVzID09PSBcImVuZFwiKSB7XG4gICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoXCJlbmRcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gV0FMTFNcbiAgY3JlYXRlV2FsbChibG9jaykge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gYmxvY2suY2xhc3NMaXN0LmFkZChcIndhbGxcIikpO1xuICB9XG5cbiAgYmxvY2tIYXNXYWxsKGJsb2NrKSB7XG4gICAgcmV0dXJuIGJsb2NrLmNsYXNzTGlzdC5jb250YWlucyhcIndhbGxcIik7XG4gIH1cblxuICBzZXRNYWtpbmdXYWxsc1N0YXRlKGJvb2wpIHtcbiAgICB0aGlzLmlzTWFraW5nV2FsbHMgPSBib29sO1xuICB9XG5cbiAgaGFuZGxlSXNTZWFyY2hpbmdTdGF0ZShpc1NlYXJjaGluZykge1xuICAgIHRoaXMuaXNTZWFyY2hpbmcgPSBpc1NlYXJjaGluZztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsZWFyQnRuXCIpLmRpc2FibGVkID0gaXNTZWFyY2hpbmc7XG4gIH1cblxuICBoYW5kbGVJc1ByZXBhcmVkU3RhdGUoaXNQcmVwYXJlZCkge1xuICAgIHRoaXMuaXNQcmVwYXJlZCA9IGlzUHJlcGFyZWQ7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydEJ0blwiKS5kaXNhYmxlZCA9ICFpc1ByZXBhcmVkO1xuICB9XG5cbiAgY2xlYXJCb2FyZCgpIHtcbiAgICBmb3IgKGxldCB5ID0gdGhpcy5oZWlnaHQgLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgICAgdGhpcy5ub2Rlc1tgJHt4fS0ke3l9YF0udXBkYXRlKHtcbiAgICAgICAgICBzdGF0dXM6IFwiYmxvY2tcIixcbiAgICAgICAgICBkaXN0OiBJbmZpbml0eSxcbiAgICAgICAgICBwcmV2SWQ6IG51bGwsXG4gICAgICAgICAgZGlyZWN0aW9uOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7eH0tJHt5fWApLmNsYXNzTGlzdCA9IFtdO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt4fS0ke3l9YCkuY2xhc3NMaXN0LmFkZChcInVudmlzaXRlZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zZXRTdGFydE5vZGUoKTtcbiAgICB0aGlzLnNldEVuZE5vZGUoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCb2FyZDtcbiIsImNsYXNzIE5vZGUge1xuICBjb25zdHJ1Y3RvcihzdGF0dXMsIHgsIHksIGRpc3QsIHByZXZJZCwgZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5pZCA9IGAke3h9LSR7eX1gO1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLmRpc3QgPSBkaXN0O1xuICAgIHRoaXMucHJldklkID0gcHJldklkO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHVwZGF0ZSh2YWx1ZXMpIHtcbiAgICBmb3IgKGxldCBmaWVsZEtleSBvZiBPYmplY3Qua2V5cyh0aGlzKSkge1xuICAgICAgZm9yIChsZXQgdmFsS2V5IG9mIE9iamVjdC5rZXlzKHZhbHVlcykpIHtcbiAgICAgICAgaWYgKGZpZWxkS2V5ID09PSB2YWxLZXkpIHtcbiAgICAgICAgICB0aGlzW2ZpZWxkS2V5XSA9IHZhbHVlc1t2YWxLZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5vZGU7XG4iLCJpbXBvcnQgYXN5bmNEZWxheSBmcm9tIFwiLi4vaGVscGVycy9hc3luY0RlbGF5XCI7XG5pbXBvcnQgeyBnZXROZWlnaGJvcnNJZHMgfSBmcm9tIFwiLi9oZWxwZXJzL25laWdoYm9yc1wiO1xuaW1wb3J0IHsgdmlzdWFsaXplUGF0aCB9IGZyb20gXCIuLi9oZWxwZXJzL3Zpc3VhbGl6ZVBhdGhcIjtcbmltcG9ydCB7IGdldENsb3Nlc3ROb2RlIH0gZnJvbSBcIi4vaGVscGVycy9ub2Rlc1wiO1xuXG5leHBvcnQgY29uc3QgYnJlYWR0aEZpcnN0ID0gYXN5bmMgKG5vZGVzLCBzdGFydCwgZW5kLCBzcGVlZCkgPT4ge1xuICBsZXQgdW52aXNpdGVkTm9kZXNJZHMgPSBPYmplY3Qua2V5cyhub2Rlcyk7XG5cbiAgbGV0IHZpc2l0ZWROb2RlcyA9IHt9O1xuICBsZXQgZm91bmRFbmQgPSBmYWxzZTtcbiAgY29uc3QgaXNTYW1lTm9kZSA9IChuMSwgbjIpID0+IG4xLnggPT09IG4yLnggJiYgbjEueSA9PT0gbjIueTtcblxuICB3aGlsZSAodW52aXNpdGVkTm9kZXNJZHMubGVuZ3RoKSB7XG4gICAgY29uc3QgY3Vyck5vZGUgPSBnZXRDbG9zZXN0Tm9kZSh1bnZpc2l0ZWROb2Rlc0lkcywgbm9kZXMpO1xuICAgIC8vIFZJU1VBTElaRVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGN1cnJOb2RlLmlkKS5jbGFzc0xpc3QuYWRkKFwidmlzaXRlZFwiKTtcbiAgICBhd2FpdCBhc3luY0RlbGF5KHNwZWVkKTtcblxuICAgIGlmICghY3Vyck5vZGUpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHZpc2l0ZWROb2Rlc1tjdXJyTm9kZS5pZF0gPSBjdXJyTm9kZTtcblxuICAgIGlmIChpc1NhbWVOb2RlKGN1cnJOb2RlLCBlbmQpKSB7XG4gICAgICBmb3VuZEVuZCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBnZXROZWlnaGJvcnNJZHMobm9kZXMsIGN1cnJOb2RlLngsIGN1cnJOb2RlLnkpLmZvckVhY2goKG5laWdoYm9ySWQpID0+IHtcbiAgICAgIGNvbnN0IGlzTmVpZ2hib3JGdXJ0aGVyRnJvbVN0YXJ0ID0gY3Vyck5vZGUuZGlzdCA8IG5vZGVzW25laWdoYm9ySWRdLmRpc3Q7XG5cbiAgICAgIGlmIChpc05laWdoYm9yRnVydGhlckZyb21TdGFydCkge1xuICAgICAgICBub2Rlc1tuZWlnaGJvcklkXS5kaXN0ID0gY3Vyck5vZGUuZGlzdCArIDE7XG4gICAgICAgIG5vZGVzW25laWdoYm9ySWRdLnByZXZJZCA9IGN1cnJOb2RlLmlkO1xuICAgICAgfVxuXG4gICAgICAvLyBWSVNVQUxJWkVcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5nZXRFbGVtZW50QnlJZChub2Rlc1tuZWlnaGJvcklkXS5pZClcbiAgICAgICAgLmNsYXNzTGlzdC5yZXBsYWNlKFwidW52aXNpdGVkXCIsIFwibmVpZ2hib3JcIik7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoZm91bmRFbmQpIHtcbiAgICB2aXN1YWxpemVQYXRoKHZpc2l0ZWROb2Rlcywgc3RhcnQsIGVuZCwgc3BlZWQpO1xuICB9XG59O1xuIiwiaW1wb3J0IGFzeW5jRGVsYXkgZnJvbSBcIi4uL2hlbHBlcnMvYXN5bmNEZWxheVwiO1xuaW1wb3J0IHsgZ2V0RGlzdGFuY2VCZXR3ZWVuTm9kZXMsIGdldE5vZGVEaXJlY3Rpb24gfSBmcm9tIFwiLi9oZWxwZXJzL3dlaWdodGVkXCI7XG5pbXBvcnQgeyBnZXROZWlnaGJvcnNJZHMgfSBmcm9tIFwiLi9oZWxwZXJzL25laWdoYm9yc1wiO1xuaW1wb3J0IHsgdmlzdWFsaXplUGF0aCB9IGZyb20gXCIuLi9oZWxwZXJzL3Zpc3VhbGl6ZVBhdGhcIjtcbmltcG9ydCB7IGdldENsb3Nlc3ROb2RlIH0gZnJvbSBcIi4vaGVscGVycy9ub2Rlc1wiO1xuXG5leHBvcnQgY29uc3QgZGlqa3N0cmEgPSBhc3luYyAobm9kZXMsIHN0YXJ0LCBlbmQsIHNwZWVkKSA9PiB7XG4gIGxldCB1bnZpc2l0ZWROb2Rlc0lkcyA9IE9iamVjdC5rZXlzKG5vZGVzKTtcblxuICBsZXQgdmlzaXRlZE5vZGVzID0ge307XG4gIGxldCBmb3VuZEVuZCA9IGZhbHNlO1xuICBjb25zdCBpc1NhbWVOb2RlID0gKG4xLCBuMikgPT4gbjEueCA9PT0gbjIueCAmJiBuMS55ID09PSBuMi55O1xuXG4gIHdoaWxlICh1bnZpc2l0ZWROb2Rlc0lkcy5sZW5ndGgpIHtcbiAgICBjb25zdCBjdXJyTm9kZSA9IGdldENsb3Nlc3ROb2RlKHVudmlzaXRlZE5vZGVzSWRzLCBub2Rlcyk7XG4gICAgLy8gVklTVUFMSVpFXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3Vyck5vZGUuaWQpLmNsYXNzTGlzdC5hZGQoXCJ2aXNpdGVkXCIpO1xuICAgIGF3YWl0IGFzeW5jRGVsYXkoc3BlZWQpO1xuXG4gICAgaWYgKCFjdXJyTm9kZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdmlzaXRlZE5vZGVzW2N1cnJOb2RlLmlkXSA9IGN1cnJOb2RlO1xuXG4gICAgaWYgKGlzU2FtZU5vZGUoY3Vyck5vZGUsIGVuZCkpIHtcbiAgICAgIGZvdW5kRW5kID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGdldE5laWdoYm9yc0lkcyhub2RlcywgY3Vyck5vZGUueCwgY3Vyck5vZGUueSkuZm9yRWFjaCgobmVpZ2hib3JJZCkgPT4ge1xuICAgICAgY29uc3QgZGlzdGFuY2VCZXR3ZWVuTm9kZXMgPSBnZXREaXN0YW5jZUJldHdlZW5Ob2RlcyhcbiAgICAgICAgY3Vyck5vZGUsXG4gICAgICAgIG5vZGVzW25laWdoYm9ySWRdXG4gICAgICApO1xuXG4gICAgICAvLyBWSVNVQUxJWkVcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5nZXRFbGVtZW50QnlJZChub2Rlc1tuZWlnaGJvcklkXS5pZClcbiAgICAgICAgLmNsYXNzTGlzdC5yZXBsYWNlKFwidW52aXNpdGVkXCIsIFwibmVpZ2hib3JcIik7XG5cbiAgICAgIGNvbnN0IGlzTmVpZ2hib3JGdXJ0aGVyRnJvbVN0YXJ0ID1cbiAgICAgICAgY3Vyck5vZGUuZGlzdCArIGRpc3RhbmNlQmV0d2Vlbk5vZGVzIDwgbm9kZXNbbmVpZ2hib3JJZF0uZGlzdDtcblxuICAgICAgaWYgKGlzTmVpZ2hib3JGdXJ0aGVyRnJvbVN0YXJ0KSB7XG4gICAgICAgIG5vZGVzW25laWdoYm9ySWRdLmRpc3QgPSBjdXJyTm9kZS5kaXN0ICsgZGlzdGFuY2VCZXR3ZWVuTm9kZXM7XG4gICAgICAgIG5vZGVzW25laWdoYm9ySWRdLnByZXZJZCA9IGN1cnJOb2RlLmlkO1xuICAgICAgICBub2Rlc1tuZWlnaGJvcklkXS5kaXJlY3Rpb24gPSBnZXROb2RlRGlyZWN0aW9uKFxuICAgICAgICAgIGN1cnJOb2RlLFxuICAgICAgICAgIG5vZGVzW25laWdoYm9ySWRdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoZm91bmRFbmQpIHtcbiAgICB2aXN1YWxpemVQYXRoKHZpc2l0ZWROb2Rlcywgc3RhcnQsIGVuZCwgc3BlZWQpO1xuICB9XG59O1xuIiwiLyoqXG4gKiBHZXQgbm9kZSBuZWlnaGJvcnMncyBrZXlzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXROZWlnaGJvcnNJZHMgPSAobm9kZXMsIHgsIHkpID0+IHtcbiAgbGV0IGFyciA9IFtdO1xuICBpZiAoXG4gICAgbm9kZXNbYCR7eH0tJHt5ICsgMX1gXSAmJlxuICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt4fS0ke3kgKyAxfWApLmNsYXNzTGlzdC5jb250YWlucyhcIndhbGxcIilcbiAgKSB7XG4gICAgYXJyLnB1c2goYCR7eH0tJHt5ICsgMX1gKTtcbiAgfVxuICBpZiAoXG4gICAgbm9kZXNbYCR7eCArIDF9LSR7eX1gXSAmJlxuICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt4ICsgMX0tJHt5fWApLmNsYXNzTGlzdC5jb250YWlucyhcIndhbGxcIilcbiAgKSB7XG4gICAgYXJyLnB1c2goYCR7eCArIDF9LSR7eX1gKTtcbiAgfVxuICBpZiAoXG4gICAgbm9kZXNbYCR7eH0tJHt5IC0gMX1gXSAmJlxuICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt4fS0ke3kgLSAxfWApLmNsYXNzTGlzdC5jb250YWlucyhcIndhbGxcIilcbiAgKSB7XG4gICAgYXJyLnB1c2goYCR7eH0tJHt5IC0gMX1gKTtcbiAgfVxuICBpZiAoXG4gICAgbm9kZXNbYCR7eCAtIDF9LSR7eX1gXSAmJlxuICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt4IC0gMX0tJHt5fWApLmNsYXNzTGlzdC5jb250YWlucyhcIndhbGxcIilcbiAgKSB7XG4gICAgYXJyLnB1c2goYCR7eCAtIDF9LSR7eX1gKTtcbiAgfVxuICByZXR1cm4gYXJyO1xufTtcbiIsIi8qKlxuICogR2V0IHRoZSBjbG9zZXN0IG5vZGVcbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0Q2xvc2VzdE5vZGUgPSAodW52aXNpdGVkSWRzLCBub2RlcykgPT4ge1xuICBsZXQgbWluID0gSW5maW5pdHk7XG4gIGxldCBtaW5EaXN0Tm9kZUlkID0gMDtcbiAgbGV0IGluZGV4ID0gMDtcblxuICB1bnZpc2l0ZWRJZHMuZm9yRWFjaCgoaWQsIGkpID0+IHtcbiAgICBpZiAobm9kZXNbaWRdKSB7XG4gICAgICBpZiAobm9kZXNbaWRdLmRpc3QgPCBtaW4pIHtcbiAgICAgICAgbWluID0gbm9kZXNbaWRdLmRpc3Q7XG4gICAgICAgIG1pbkRpc3ROb2RlSWQgPSBpZDtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdW52aXNpdGVkSWRzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgcmV0dXJuIG5vZGVzW21pbkRpc3ROb2RlSWRdO1xufTtcbiIsIi8qKlxuICogUG9zc2libGUgZGlyZWN0aW9ucyBvZiBub2RlXG4gKi9cbmV4cG9ydCBjb25zdCBkaXJlY3Rpb25zID0ge1xuICBub3J0aDogMCxcbiAgZWFzdDogMSxcbiAgc291dGg6IDIsXG4gIHdlc3Q6IDMsXG59O1xuXG5jb25zdCBkaXJlY3Rpb25zTmFtZSA9IFtcIm5vcnRoXCIsIFwiZWFzdFwiLCBcInNvdXRoXCIsIFwid2VzdFwiXTtcblxuLyoqXG4gKiBHZXQgZGlyZWN0aW9uIG5hbWUgYnkgcHJvdmlkZWQgaW5kZXhcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpcmVjdGlvbk5hbWUgPSAoaW5kZXgpID0+IGRpcmVjdGlvbnNOYW1lW2luZGV4XTtcblxuLyoqXG4gKiBOb2RlIGNhbiBiZSBkaXJlY3RlZCBpbnRvIDQgZGlyZWN0aW9ucyAtIG5vcnRoLCBlYXN0LCBzb3V0aCBhbmQgd2VzdFxuICogVGhlIGFycmF5IHJlcHJlc2VudHMgdGhlIHdlaWdodCBvZiBjaG9vc2luZyB0aGUgbmV4dCBkaXJlY3Rpb25cbiAqIDkwIGRlZ3JlZSB0dXJuIGNvc3RzIDEgcG9pbnRzXG4gKiBbMF0gLSBnbyBub3J0aCB3ZWlnaHRcbiAqIFsxXSAtIGdvIGVhc3Qgd2VpZ2h0XG4gKiBbMl0gLSBnbyBzb3V0aCB3ZWlnaHRcbiAqIFszXSAtIGdvIHdlc3Qgd2VpZ2h0XG4gKi9cbmV4cG9ydCBjb25zdCBub3J0aERpcmVjdGlvbldlaWdodHMgPSBbMCwgMSwgMiwgMV07XG5leHBvcnQgY29uc3QgZWFzdERpcmVjdGlvbldlaWdodHMgPSBbMSwgMCwgMSwgMl07XG5leHBvcnQgY29uc3Qgc291dGhEaXJlY3Rpb25XZWlnaHRzID0gWzIsIDEsIDAsIDFdO1xuZXhwb3J0IGNvbnN0IHdlc3REaXJlY3Rpb25XZWlnaHRzID0gWzEsIDIsIDEsIDBdO1xuXG5leHBvcnQgY29uc3QgbW92ZVdlaWdodCA9IDE7XG5cbi8qKlxuICogR2V0IGRpc3RhbmNlIGJldHdlZW4gdHdvIG5vZGVzIGJhc2VkIG9uIHRoZSB3ZWlnaHRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERpc3RhbmNlQmV0d2Vlbk5vZGVzID0gKG5vZGVfMSwgbm9kZV8yKSA9PiB7XG4gIC8vIG5vZGVfMiBpcyB1cFxuICBpZiAobm9kZV8xLnkgPCBub2RlXzIueSAmJiBub2RlXzEueCA9PT0gbm9kZV8yLngpIHtcbiAgICByZXR1cm4gbm9ydGhEaXJlY3Rpb25XZWlnaHRzW25vZGVfMS5kaXJlY3Rpb25dICsgbW92ZVdlaWdodDtcbiAgfVxuICAvLyBub2RlXzIgaXMgcmlnaHRcbiAgZWxzZSBpZiAobm9kZV8xLnggPCBub2RlXzIueCAmJiBub2RlXzEueSA9PT0gbm9kZV8yLnkpIHtcbiAgICByZXR1cm4gZWFzdERpcmVjdGlvbldlaWdodHNbbm9kZV8xLmRpcmVjdGlvbl0gKyBtb3ZlV2VpZ2h0O1xuICB9XG4gIC8vIG5vZGVfMiBpcyBib3R0b21cbiAgZWxzZSBpZiAobm9kZV8xLnkgPiBub2RlXzIueSAmJiBub2RlXzEueCA9PT0gbm9kZV8yLngpIHtcbiAgICByZXR1cm4gc291dGhEaXJlY3Rpb25XZWlnaHRzW25vZGVfMS5kaXJlY3Rpb25dICsgbW92ZVdlaWdodDtcbiAgfVxuICAvLyBub2RlXzIgaXMgbGVmdFxuICBlbHNlIGlmIChub2RlXzEueCA+IG5vZGVfMi54ICYmIG5vZGVfMS55ID09PSBub2RlXzIueSkge1xuICAgIHJldHVybiB3ZXN0RGlyZWN0aW9uV2VpZ2h0c1tub2RlXzEuZGlyZWN0aW9uXSArIG1vdmVXZWlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGVuIHNldHRpbmcgdGhlIGRpc3RhbmNlIGJldHdlZW4gbm9kZXMuXCJcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHVybiBkaXJlY3Rpb24gb2Ygbm9kZV8yIGJhc2VkIG9uIHRoZWlyIHBvc2l0aW9uc1xuICovXG5leHBvcnQgY29uc3QgZ2V0Tm9kZURpcmVjdGlvbiA9IChub2RlXzEsIG5vZGVfMikgPT4ge1xuICBpZiAobm9kZV8xLnkgPCBub2RlXzIueSAmJiBub2RlXzEueCA9PT0gbm9kZV8yLngpIHtcbiAgICByZXR1cm4gZGlyZWN0aW9uc1tcIm5vcnRoXCJdO1xuICB9IGVsc2UgaWYgKG5vZGVfMS54IDwgbm9kZV8yLnggJiYgbm9kZV8xLnkgPT09IG5vZGVfMi55KSB7XG4gICAgcmV0dXJuIGRpcmVjdGlvbnNbXCJlYXN0XCJdO1xuICB9IGVsc2UgaWYgKG5vZGVfMS55ID4gbm9kZV8yLnkgJiYgbm9kZV8xLnggPT09IG5vZGVfMi54KSB7XG4gICAgcmV0dXJuIGRpcmVjdGlvbnNbXCJzb3V0aFwiXTtcbiAgfSBlbHNlIGlmIChub2RlXzEueCA+IG5vZGVfMi54ICYmIG5vZGVfMS55ID09PSBub2RlXzIueSkge1xuICAgIHJldHVybiBkaXJlY3Rpb25zW1wid2VzdFwiXTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGVuIHNldHRpbmcgdGhlIGRpcmVjdGlvbiBvZiBub2RlLlwiKTtcbiAgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IChtcykgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn07XG4iLCJleHBvcnQgY29uc3QgY3JlYXRlQmxvY2sgPSAocGFyZW50LCBibG9ja1NpemUsIHgsIHkpID0+IHtcbiAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG5cbiAgYmxvY2suaWQgPSBgJHt4fS0ke3l9YDtcbiAgYmxvY2suY2xhc3NMaXN0LmFkZChcInVudmlzaXRlZFwiKTtcbiAgYmxvY2suc3R5bGUud2lkdGggPSBgJHtibG9ja1NpemV9cHhgO1xuICBibG9jay5zdHlsZS5oZWlnaHQgPSBgJHtibG9ja1NpemV9cHhgO1xuXG4gIGJsb2NrLmRhdGFzZXQueCA9IHg7XG4gIGJsb2NrLmRhdGFzZXQueSA9IHk7XG5cbiAgcGFyZW50LmFwcGVuZENoaWxkKGJsb2NrKTtcbn07XG4iLCJpbXBvcnQgeyBnZXRSYW5kb21OdW0gfSBmcm9tIFwiLi9nZXRSYW5kb21OdW1cIjtcblxuZXhwb3J0IGNvbnN0IGdldERpZmZlcmVudFJhbmRvbU51bSA9IChtaW4sIG1heCwgZGlmZmVyZW50RnJvbSkgPT4ge1xuICBsZXQgcmFuZDtcbiAgZG8ge1xuICAgIHJhbmQgPSBnZXRSYW5kb21OdW0obWluLCBtYXgpO1xuICB9IHdoaWxlIChyYW5kID09PSBkaWZmZXJlbnRGcm9tKTtcblxuICByZXR1cm4gcmFuZDtcbn07XG4iLCJleHBvcnQgY29uc3QgZ2V0UmFuZG9tTnVtID0gKG1pbiwgbWF4KSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpICsgbWluO1xuIiwiaW1wb3J0IGFzeW5jRGVsYXkgZnJvbSBcIi4vYXN5bmNEZWxheVwiO1xuXG5leHBvcnQgY29uc3QgdmlzdWFsaXplUGF0aCA9IGFzeW5jICh2aXNpdGVkTm9kZXMsIHN0YXJ0LCBlbmQsIHNwZWVkKSA9PiB7XG4gIGxldCBwYXRoSWRzID0gW107XG4gIGxldCBmb3VuZFN0YXJ0ID0gZmFsc2U7XG4gIGxldCBjdXJyTm9kZSA9IHZpc2l0ZWROb2Rlc1tgJHtlbmQueH0tJHtlbmQueX1gXTtcbiAgcGF0aElkcy5wdXNoKGN1cnJOb2RlLmlkKTtcblxuICB3aGlsZSAoIWZvdW5kU3RhcnQpIHtcbiAgICBpZiAoY3Vyck5vZGUueCA9PT0gc3RhcnQueCAmJiBjdXJyTm9kZS55ID09PSBzdGFydC55KSB7XG4gICAgICBmb3VuZFN0YXJ0ID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBwYXRoSWRzLnB1c2goY3Vyck5vZGUucHJldklkKTtcbiAgICBjdXJyTm9kZSA9IHZpc2l0ZWROb2Rlc1tjdXJyTm9kZS5wcmV2SWRdO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IHBhdGhJZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXRoSWRzW2ldKS5jbGFzc0xpc3QuYWRkKFwicGF0aFwiKTtcbiAgICBhd2FpdCBhc3luY0RlbGF5KHNwZWVkICsgMTAwKTtcbiAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=